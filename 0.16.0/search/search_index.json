{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Introduction","text":"<p>This tutorial explains how to perform immunophenotyping using Flow Cytometry data in Tercen.</p>"},{"location":"#topics-covered","title":"Topics Covered","text":"<ul> <li>Create a new project.</li> <li>Running the immunophenotyping template.</li> <li>Adjusting settings.</li> <li>Optimising population clusters.</li> <li>Working with your own files.</li> </ul> <p>Note: Right click on a screenshot and open in a new tab to see a High Res version.</p>"},{"location":"#preparation","title":"Preparation","text":"<p>This guide assumes you have a basic knowledge of how to navigate Tercen and use its features.</p> <p>It is recommended that you complete the Tercen Starter Guide before attempting to follow this tutorial.</p> <p>Follow this link to the Tercen Starter Guide</p>"},{"location":"1_template/","title":"How to Run the immunophenotyping template","text":"<p>This tutorial explains how to start a project and run the immunophenotyping template.</p> <p>Templates are pre-defined workflows that are saved into Tercen for quick loading.</p> <p>They provide standardisation of analysis and help make experiments reproducible.</p> <p>This chapter will use pre-prepared data (FCS files and an annotation file) to demonstrate the concepts.</p>"},{"location":"1_template/#create-a-project","title":"Create a project","text":"<p>Click the New Project Button.</p> <p>Name it \"Immunophenotyping Guide\"</p> <p>Press OK.</p>"},{"location":"1_template/#new-workflow","title":"New workflow","text":"<p>To begin an analysis click New Workflow</p> <p>Choose - Flow Immunophenotyping - Phenograph</p> <p></p> <p>Press Ok</p>"},{"location":"1_template/#run-an-analysis","title":"Run an analysis","text":"<p>The workflow canvas will show the immunophenotyping workflow.</p> <p>It has sections to perform different functions.</p> <ul> <li>Importing files.</li> <li>Quality Control and Normalisation of Data.</li> <li>Analysis algorithms for clustering and dimension reduction.</li> <li>Reports</li> </ul> <p></p> <p>Press Run All to begin analysis</p> <p>Tercen will ask you to assign files to be analysed.</p> <p>Sample files have been uploaded in advance to the Tercen Library.</p> <p>Use the Main Library and flow cytometry tags to narrow down the selection.</p> <p>Choose OMIP=-69 - FCS Files (10k Events).zip</p> <p></p> <p>Press OK.</p> <p>This Template uses an annotation file to describe treatment conditions.</p> <p>Use the Tags and search bar to find and select OMIP-069 - Sample Annotation.txt</p> <p></p> <p>Press OK.</p> <p>The workflow will being analysis and will show a spinning icon on the step is is processing as well as progress bars along the bottom of the screen.</p> <p>When a step has finished it will display a Green Dot.</p> <p>When the workflow has completed all analysis blocks Save the workflow.</p>"},{"location":"1_template/#report-tab","title":"Report Tab","text":"<p>Click the report tab to open the analysis results.</p> <p></p> <p>Note: Graphs can be enlarged on screen by clicking on them.</p> <p>Each analysis block in the workflow will generate multiple results.</p>"},{"location":"1_template/#data-pre-processing","title":"Data Pre-processing","text":"<ul> <li>Read FCS (information on the files, channels and events).</li> <li>Channel Names and descriptions.</li> <li>Event Count.</li> <li>Marker Distribution (logicle).</li> <li>Marker Distribution (z value).</li> </ul>"},{"location":"1_template/#clustering-and-dimension-reduction","title":"Clustering and Dimension Reduction","text":"<ul> <li>View Clusters on UMAP.</li> <li>UMAP coloured by file.</li> <li>UMAP coloured by condition.</li> <li>UMAP vs. Marker Expression.</li> </ul>"},{"location":"1_template/#cluster-interpretation","title":"Cluster Interpretation","text":"<ul> <li>Ordered enrichment heatmap.</li> <li>Cluster markers.</li> <li>Cluster profiles.</li> </ul>"},{"location":"1_template/#differential-analysis","title":"Differential Analysis","text":"<ul> <li>Cluster proportions per sample.</li> <li>Cluster proportions across conditions.</li> <li>UMAP across conditions.</li> </ul>"},{"location":"1_template/#export","title":"Export","text":"<ul> <li>Export Report as PDF</li> <li>Export Report as Power Point Slides</li> <li>Export FCS files with UMAP and Clusters</li> </ul> <p>NB: Individual graphs or tables can be downloaded by clicking the link below them.</p>"},{"location":"2_Adjust_Settings/","title":"Adjusting Events and Channels","text":"<p>In this lesson we will open analysis blocks and adjust relevant settings to control which channels and events are included in the analysis.</p> <p>We will set up browser tabs to review how they impact the visualisations.</p>"},{"location":"2_Adjust_Settings/#clone-the-workflow","title":"Clone the workflow","text":"<p>In order to compare our changes to the original we will clone the workflow.</p> <p>Press the Clone Button</p> <p>Click Next to select the team.</p> <p>Click Next to select the project</p> <p>Note: If you have followed this tutorial you should not have to change the automatic suggestions. Be aware that if you created this tutorial into a Team then you may have to change selections here.</p> <p>Rename the workflow to \"Analysis Settings Changed\".</p> <p>Press OK</p> <p>Right click the Immunophenotyping Guide link in the breadcrumb.</p> <p>Select \"Open in a new Tab\"</p> <p>Click the Flow Immunophenotyping - Phenograph link to open it.</p> <p>Now you can change tabs on your browser to compare changes.</p>"},{"location":"2_Adjust_Settings/#adjust-channels-in-the-analysis","title":"Adjust Channels in the analysis","text":"<p>Select the Analysis Settings Changed workflow on your browser tab.</p> <p>Double Click the Data pre-processing box.</p> <p>The view panel will open.</p> <p>Choose Channel Selection and Downsampling</p> <p>A data step will open.</p>"},{"location":"2_Adjust_Settings/#remove-a-channel","title":"Remove a Channel","text":"<p>Press the Reset button to allow us to modify settings.</p> <p>Click the chevron on the filters section and select Exclude QC channels.</p> <p>This filter is a list of all channels currently excluded from the analysis.</p> <p>To Remove a channel from the analysis we add it to the exclusion list.</p> <p>Press the plus button.</p> <p>A new line will be created.</p> <p>Change the NaN value to CD38</p>"},{"location":"2_Adjust_Settings/#add-a-channel","title":"Add a Channel","text":"<p>To add an excluded channel into our analysis remove it from this list.</p> <p>For the FSC-A line.</p> <p>Press the minus button.</p> <p>Press OK.</p> <p>Press Save.</p> <p>Return to Analysis Settings Changed workflow using the Breadcrumb.</p>"},{"location":"2_Adjust_Settings/#downsampling","title":"Downsampling","text":"<p>Downsampling is the process of reducing the amount of data for analysis. This is done by systematically selecting a subset of the data at a lower rate than the original.</p> <p>Downsampling can give you a quick analysis result by processing less data. Useful for forming an opinion on how the data looks before submitting the full amount for a long running calculation.</p> <p>Downsampling can also balance an analysis across samples which do not have the same number of data points.</p> <p>From the Analysis Settings Changed workflow</p> <p>Double Click the Data pre-processing box.</p> <p>The view panel will open.</p> <p>Choose Channel Selection and Downsampling</p> <p>The data step will open again.</p> <p>Press the Reset button to allow us to modify settings.</p> <p>Downsampling is controlled by two types of filter.</p> <p>Choose the filter that best represents your needs.</p>"},{"location":"2_Adjust_Settings/#downsampling-events","title":"Downsampling # Events","text":"<p>This is a whole number setting for the maximum events to be included from each file.</p> <p>Files with less events than this setting will have all events included and files with more will be restricted.</p> <p>To modify.</p> <p>Click the chevron on the filters section and select Downsampling # Events.</p> <p>Change the value to 1000</p>"},{"location":"2_Adjust_Settings/#downsampling-percentage","title":"Downsampling Percentage","text":"<p>This is a proportionate setting for the maximum events to be included from each file.</p> <p>This setting takes a balanced approach based on the file with smallest number of events.</p> <p>For example.</p> <p>If there are two FCS files. One with 1000 events and one with 10000 events and the downsampling is set to 80%.</p> <p>Both files will be reduced to 800 events for calculation. The smaller file dictates the number calculated.</p> <p>To modify.</p> <p>Click the chevron on the filters section and select Downsampling Percentage.</p> <p>Change the value to 40</p>"},{"location":"2_Adjust_Settings/#re-run-the-workflow","title":"Re-Run the Workflow","text":"<p>Press OK.</p> <p>Press Save.</p> <p>Return to Analysis Settings Changed workflow using the Breadcrumb</p> <p>Press Run All</p>"},{"location":"2_Adjust_Settings/#compare-changes","title":"Compare changes","text":"<p>Using the tabs on your browser open the report window in both workflows.</p> <p>Compare Channel names and descriptions and Event Count (filtered data).</p>"},{"location":"3_Adjust_Clustering/","title":"Working with Clusters","text":"<p>This chapter explains the settings that control the clusters found by the Phenograph algorithm and how they are represented by the UMAP algorithm.</p>"},{"location":"3_Adjust_Clustering/#clone-the-workflow","title":"Clone the workflow","text":"<p>Take another copy of the original workflow.</p> <p>Press the Clone Button</p> <p>Click Next to select the team.</p> <p>Click Next to select the project</p> <p>Note: If you have followed this tutorial you should not have to change the automatic suggestions. Be aware that if you created this tutorial into a Team then you may have to change selections here.</p> <p>Rename the workflow to \"Cluster Settings\".</p> <p>Press OK</p> <p>Right click the Immunophenotyping Guide link in the breadcrumb.</p> <p>Select \"Open in a new Tab\"</p> <p>Click the Flow Immunophenotyping - Phenograph link to open it.</p> <p>Now you can change tabs on your browser to compare changes.</p>"},{"location":"3_Adjust_Clustering/#adjusting-phenograph","title":"Adjusting Phenograph","text":"<p>PhenoGraph is a graph-based clustering algorithm that constructs a k-nearest neighbour graph. It is widely used for high-dimensional single-cell data analysis.</p> <p>Select the Cluster Settings workflow on your browser tab.</p> <p>Double Click the Clustering and Dimension Reduction box.</p> <p>The view panel will open.</p> <p>Choose Clustering: Phenograph</p> <p></p> <p>A data step will open.</p> <p>Press Reset to allow modification.</p> <p>Open the Settings Panel by clicking the tab.</p> <p></p>"},{"location":"3_Adjust_Clustering/#k-value","title":"k value","text":"<p>This is the stringency parameter it adjust how clusters will appear on any visualisation.</p> <p>This can help with defining separation from other clusters.</p> <p>A higher value means larger clusters.</p> <p>A lover value means smaller clusters.</p> <p>Set k to 15</p>"},{"location":"3_Adjust_Clustering/#seed","title":"Seed","text":"<p>Controls randomness in the calculations made by the algorithm.</p> <p>By re-running the algorithm with different seed values you can test how reliably it is finding clusters. If different seed values still produce the same graph then the algorithm is stable.</p> <p>Set seed to 29.</p>"},{"location":"3_Adjust_Clustering/#umap","title":"UMAP","text":"<p>UMAP (Uniform Manifold Approximation and Projection) is a nonlinear dimensionality reduction technique that preserves global and local structures, making it useful for visualizing high-dimensional data.</p> <p>Double Click the Clustering and Dimension Reduction box.</p> <p>The view panel will open.</p> <p>Choose Dimension Reduction: UMAP</p> <p>A data step will open.</p> <p>Press Reset to allow modification.</p> <p>Open the Settings Panel by clicking the tab.</p> <p>Two settings influence how clumped together or separated the clusters are in the visualisation.</p> <p></p>"},{"location":"3_Adjust_Clustering/#spread","title":"Spread","text":"<p>Set spread to 2</p>"},{"location":"3_Adjust_Clustering/#min-dist","title":"min-dist","text":"<p>Set min-dist to 0.75</p> <p>*Note: UMAP also uses a seed to control randomness. You can perform the same stability checks for UMAP with this setting.</p> <p>Press Save.</p>"},{"location":"3_Adjust_Clustering/#configure-how-plots-appear","title":"Configure how plots appear","text":"<p>Tercen allows you to change colour palettes and labels on graphs.</p> <p>Select the Cluster Settings workflow on your browser tab.</p> <p>Double Click the Clustering and Dimension Reduction box.</p> <p>The view panel will open.</p> <p>Choose UMAP vs. Marker Expression</p> <p>Prese Reset to allow modification.</p>"},{"location":"3_Adjust_Clustering/#plot-layout-settings","title":"Plot Layout Settings","text":"<p>In the settings tab.</p> <p></p> <p>Change title to \"UMAP Marker - Jet\"</p> <p>Change xlab to \"UMAP A\"</p> <p>Change ylab to \"UMAP B\"</p> <p>There are other settings for sizes, fonts and notation.</p>"},{"location":"3_Adjust_Clustering/#colour-palette","title":"Colour Palette","text":"<p>Select the Palette* tab.</p> <p>Change the palette to \"Jet\".</p> <p>Press Save</p>"},{"location":"3_Adjust_Clustering/#re-run-the-workflow","title":"Re-Run the Workflow","text":"<p>Return to Cluster Settings workflow using the Breadcrumb</p> <p>Press Run All</p> <p>Press Save.</p>"},{"location":"3_Adjust_Clustering/#compare-changes","title":"Compare changes","text":"<p>Using the tabs on your browser open the report window in both workflows.</p> <p>Compare how the visualisations have changed from the original.</p> <p>Graphs to compare.</p> <ul> <li>UMAP by PhenoGraph Cluster.</li> <li>UMAP vs. Marker Expression.</li> </ul>"},{"location":"4_Own_Files/","title":"Using your own files","text":"<p>This chapter explains how to use your own FCS siles with the Immunophenotyping - Phenograph template.</p>"},{"location":"4_Own_Files/#zip-the-fcs-files","title":"ZIP the FCS files","text":"<p>Compress all FCS files into a ZIP file.</p> <p>This can be done in your file browser or with a compression app such as 7.zip.</p>"},{"location":"4_Own_Files/#make-an-annotation-file","title":"Make an Annotation File","text":"<p>To make your own annotation file open the Flow Immunophenotyping - PhenoGraph workflow in the tutorial project.</p> <p>Select the OMIP-069 - Sample Annotation and edit it using the local toolbar.</p> <p></p> <p>The annotation file is made up of two columns.</p> <ul> <li>filename</li> <li>Condition</li> </ul> <p>Press the Download button</p> <p></p> <p>When the file downloads open it in your spreadsheet program (e.g Excel).</p> <p>Change the filenames to match your FCS files and set the relevant condition for that file.</p> <p>Save your changes and rename your file to something appropriate.</p>"},{"location":"4_Own_Files/#create-a-new-project","title":"Create a new project","text":"<p>Follow the procedure in Chapter 1 to create a new project.</p> <p>Upload the ZIP file with Upload File button</p> <p>Upload the Annotation file using the Import Data button.</p> <p>Choose the CSV importer</p>"},{"location":"4_Own_Files/#run-the-template","title":"Run the Template","text":"<p>Follow the New Workflow procedure as per Chapter 1.</p> <p>Be sure to select the Flow Immunophenotyping - PhenoGraph template.</p> <p>Press Run All.</p> <p>Select your own files for the analysis.</p>"},{"location":"4_Own_Files/#channel-descriptions","title":"Channel Descriptions","text":"<p>The Channel Names and descriptions section of the report assumes that the FCS files have been cleaned.</p> <p>If the Channel descriptions do not match your expectations we recommend you rename in your gating software and re-upload the files.</p>"}]}